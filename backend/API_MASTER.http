###############################################################################
# API MASTER - ALL ROUTES
# Complete HTTP test suite for entire backend API
#
# Total Routes: 250+
# Modules: 33
# Base URL: http://localhost:3000/api/v1
#
# Usage:
# 1. Start with AUTH to get tokens
# 2. Use {{accessToken}} variable in protected routes
# 3. Adjust {{companyId}}, {{userId}}, etc. as needed
#
# Created: 2026-01-02
# Version: 1.0.0
###############################################################################

### GLOBAL VARIABLES
@baseUrl = http://localhost:3000/api/v1
@accessToken =
@refreshToken =
@companyId =
@userId =

###############################################################################
# HEALTH & METRICS (Public)
###############################################################################

### Health Check
GET http://localhost:3000/healthz

### Readiness Check
GET http://localhost:3000/readyz

### Prometheus Metrics
GET http://localhost:3000/metrics

###############################################################################
# MODULE 1: AUTH (/api/v1/auth)
# Routes: 8
# File: src/modules/auth/auth.http
###############################################################################

### 1.1 Register Company
# @name register
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "companyName": "Test Company",
  "companyEmail": "company@test.com",
  "adminName": "Admin",
  "adminEmail": "admin@test.com",
  "adminPassword": "SecurePass123!"
}

### 1.2 Login
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@test.com",
  "password": "SecurePass123!"
}

@accessToken = {{login.response.body.data.accessToken}}
@refreshToken = {{login.response.body.data.refreshToken}}

### 1.3 Get Current User
GET {{baseUrl}}/auth/me
Authorization: Bearer {{accessToken}}

### 1.4 Refresh Token
POST {{baseUrl}}/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### 1.5 Setup 2FA
POST {{baseUrl}}/auth/2fa/setup
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "password": "SecurePass123!"
}

### 1.6 Verify 2FA
POST {{baseUrl}}/auth/2fa/verify
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "token": "123456"
}

### 1.7 Disable 2FA
POST {{baseUrl}}/auth/2fa/disable
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "password": "SecurePass123!",
  "token": "123456"
}

### 1.8 Logout
POST {{baseUrl}}/auth/logout
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 2: CRM (/api/v1/crm)
# Routes: 30+
# File: src/modules/crm/crm.http
###############################################################################

### 2.1 List Contacts
GET {{baseUrl}}/crm/contacts
Authorization: Bearer {{accessToken}}

### 2.2 Create Contact
# @name createContact
POST {{baseUrl}}/crm/contacts
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john@example.com",
  "phone": "+1234567890",
  "leadStatus": "LEAD",
  "leadSource": "WEBSITE"
}

@contactId = {{createContact.response.body.data.id}}

### 2.3 Get Contact
GET {{baseUrl}}/crm/contacts/{{contactId}}
Authorization: Bearer {{accessToken}}

### 2.4 Update Contact
PATCH {{baseUrl}}/crm/contacts/{{contactId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "leadStatus": "QUALIFIED",
  "position": "CEO"
}

### 2.5 Delete Contact
DELETE {{baseUrl}}/crm/contacts/{{contactId}}
Authorization: Bearer {{accessToken}}

### 2.6 Enrich Contact (AI)
GET {{baseUrl}}/crm/contacts/{{contactId}}/enrich
Authorization: Bearer {{accessToken}}

### 2.7 Contact Engagement Score (AI)
GET {{baseUrl}}/crm/contacts/{{contactId}}/engagement
Authorization: Bearer {{accessToken}}

### 2.8 Contact Churn Prediction (AI)
GET {{baseUrl}}/crm/contacts/{{contactId}}/churn
Authorization: Bearer {{accessToken}}

### 2.9 List Deals
GET {{baseUrl}}/crm/deals
Authorization: Bearer {{accessToken}}

### 2.10 Create Deal
# @name createDeal
POST {{baseUrl}}/crm/deals
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "Enterprise Deal",
  "value": 50000,
  "currency": "USD",
  "contactId": "{{contactId}}",
  "stage": "PROSPECTING"
}

@dealId = {{createDeal.response.body.data.id}}

### 2.11 Get Deal
GET {{baseUrl}}/crm/deals/{{dealId}}
Authorization: Bearer {{accessToken}}

### 2.12 Update Deal
PUT {{baseUrl}}/crm/deals/{{dealId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "Enterprise Deal Updated",
  "value": 75000,
  "stage": "NEGOTIATION"
}

### 2.13 Delete Deal
DELETE {{baseUrl}}/crm/deals/{{dealId}}
Authorization: Bearer {{accessToken}}

### 2.14 Move Deal Stage
PATCH {{baseUrl}}/crm/deals/{{dealId}}/stage
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "stage": "CLOSED_WON"
}

### 2.15 Deal Probability (AI)
GET {{baseUrl}}/crm/deals/{{dealId}}/probability
Authorization: Bearer {{accessToken}}

### 2.16 List Interactions
GET {{baseUrl}}/crm/interactions
Authorization: Bearer {{accessToken}}

### 2.17 Create Interaction
POST {{baseUrl}}/crm/interactions
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "type": "EMAIL",
  "direction": "OUTBOUND",
  "contactId": "{{contactId}}",
  "subject": "Follow-up call",
  "notes": "Discussed pricing options"
}

### 2.18 Get Recommendations (AI)
GET {{baseUrl}}/crm/contact/{{contactId}}/recommendations
Authorization: Bearer {{accessToken}}

### 2.19 Pipeline Analytics
GET {{baseUrl}}/crm/analytics/pipeline
Authorization: Bearer {{accessToken}}

### 2.20 List Pipelines
GET {{baseUrl}}/crm/pipelines
Authorization: Bearer {{accessToken}}

### 2.21 Create Pipeline
POST {{baseUrl}}/crm/pipelines
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Sales Pipeline",
  "stages": ["PROSPECTING", "QUALIFIED", "PROPOSAL", "NEGOTIATION", "CLOSED_WON", "CLOSED_LOST"]
}

### 2.22 List CRM Companies
GET {{baseUrl}}/crm/companies
Authorization: Bearer {{accessToken}}

### 2.23 Create CRM Company
POST {{baseUrl}}/crm/companies
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Acme Corp",
  "industry": "Technology",
  "size": "ENTERPRISE",
  "website": "https://acme.com"
}

### 2.24 List Activities
GET {{baseUrl}}/crm/activities
Authorization: Bearer {{accessToken}}

### 2.25 Get Lead Scoring
GET {{baseUrl}}/crm/lead-scoring
Authorization: Bearer {{accessToken}}

### 2.26 Deal Health Rules
GET {{baseUrl}}/crm/deal-health-rules
Authorization: Bearer {{accessToken}}

### 2.27 Deals Health Status
GET {{baseUrl}}/crm/deals/health
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 3: KNOWLEDGE (/api/v1/knowledge)
# Routes: 15+
# File: src/modules/knowledge/knowledge.http
###############################################################################

### 3.1 List Nodes
GET {{baseUrl}}/knowledge/nodes
Authorization: Bearer {{accessToken}}

### 3.2 Create Node
# @name createNode
POST {{baseUrl}}/knowledge/nodes
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "Product Strategy 2024",
  "content": "# Product Strategy\n\n## Objectives\n- Increase market share\n- Improve customer satisfaction",
  "tags": ["strategy", "product", "2024"],
  "type": "PERMANENT"
}

@nodeId = {{createNode.response.body.data.id}}

### 3.3 Get Node
GET {{baseUrl}}/knowledge/nodes/{{nodeId}}
Authorization: Bearer {{accessToken}}

### 3.4 Update Node
PATCH {{baseUrl}}/knowledge/nodes/{{nodeId}}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "content": "# Updated Product Strategy\n\n## New Objectives\n- Market expansion\n- Innovation",
  "tags": ["strategy", "product", "2024", "updated"]
}

### 3.5 Delete Node
DELETE {{baseUrl}}/knowledge/nodes/{{nodeId}}
Authorization: Bearer {{accessToken}}

### 3.6 Create Link Between Nodes
POST {{baseUrl}}/knowledge/nodes/{{nodeId}}/links
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "toNodeId": "other-node-id",
  "type": "RELATES_TO"
}

### 3.7 Delete Link
DELETE {{baseUrl}}/knowledge/links/link-id
Authorization: Bearer {{accessToken}}

### 3.8 Obsidian Graph Visualization
GET {{baseUrl}}/knowledge/graph/obsidian
Authorization: Bearer {{accessToken}}

### 3.9 Graph Visualization
GET {{baseUrl}}/knowledge/graph
Authorization: Bearer {{accessToken}}

### 3.10 Convert Entity to Zettel
POST {{baseUrl}}/knowledge/convert
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "entityType": "CONTACT",
  "entityId": "{{contactId}}"
}

### 3.11 Batch Convert
POST {{baseUrl}}/knowledge/convert/batch
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "entities": [
    { "entityType": "CONTACT", "entityId": "id1" },
    { "entityType": "DEAL", "entityId": "id2" }
  ]
}

### 3.12 Node Suggestions (AI)
GET {{baseUrl}}/knowledge/nodes/{{nodeId}}/suggestions
Authorization: Bearer {{accessToken}}

### 3.13 Suggest Tags (AI)
POST {{baseUrl}}/knowledge/nodes/suggest-tags
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "content": "This is a note about machine learning and AI"
}

### 3.14 Suggest Links (AI)
GET {{baseUrl}}/knowledge/nodes/{{nodeId}}/suggest-links
Authorization: Bearer {{accessToken}}

### 3.15 List Tags
GET {{baseUrl}}/knowledge/tags
Authorization: Bearer {{accessToken}}

### 3.16 Semantic Search (RAG)
POST {{baseUrl}}/knowledge/search/semantic
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "query": "What is our product strategy?",
  "limit": 5
}

### 3.17 Ask AI with RAG
POST {{baseUrl}}/knowledge/ask
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "question": "What are the key objectives for 2024?"
}

###############################################################################
# MODULE 4: AI (/api/v1/ai)
# Routes: 6
# File: src/modules/ai/ai.http
###############################################################################

### 4.1 RAG Query
POST {{baseUrl}}/ai/rag/query
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "query": "Explain our pricing model",
  "context": "sales"
}

### 4.2 RAG Ingest Node
POST {{baseUrl}}/ai/rag/ingest
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "nodeId": "{{nodeId}}",
  "content": "Content to ingest into RAG"
}

### 4.3 RAG Search
GET {{baseUrl}}/ai/rag/search?q=pricing&limit=5
Authorization: Bearer {{accessToken}}

### 4.4 AI Chat Completion
POST {{baseUrl}}/ai/chat
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "messages": [
    { "role": "user", "content": "Write a professional email for a sales follow-up" }
  ]
}

### 4.5 Get AI Mode
GET {{baseUrl}}/ai/mode
Authorization: Bearer {{accessToken}}

### 4.6 Set AI Mode
POST {{baseUrl}}/ai/mode
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "mode": "CREATIVE"
}

###############################################################################
# MODULE 5: CHAT (/api/v1/chat)
# Routes: 8
# File: src/modules/chat/chat.http
###############################################################################

### 5.1 List Channels
GET {{baseUrl}}/chat/channels
Authorization: Bearer {{accessToken}}

### 5.2 Create Channel
# @name createChannel
POST {{baseUrl}}/chat/channels
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "General Discussion",
  "type": "PUBLIC",
  "description": "General team discussions"
}

@channelId = {{createChannel.response.body.data.id}}

### 5.3 List Channel Messages
GET {{baseUrl}}/chat/channels/{{channelId}}/messages
Authorization: Bearer {{accessToken}}

### 5.4 Send Message
# @name sendMessage
POST {{baseUrl}}/chat/messages
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "channelId": "{{channelId}}",
  "content": "Hello team! This is a test message."
}

@messageId = {{sendMessage.response.body.data.id}}

### 5.5 Message Sentiment (AI)
GET {{baseUrl}}/chat/messages/{{messageId}}/sentiment
Authorization: Bearer {{accessToken}}

### 5.6 Channel Sentiment (AI)
GET {{baseUrl}}/chat/channels/{{channelId}}/sentiment
Authorization: Bearer {{accessToken}}

### 5.7 Suggest Reply (AI)
POST {{baseUrl}}/chat/messages/{{messageId}}/suggest-reply
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{}

### 5.8 Channel Summary (AI)
GET {{baseUrl}}/chat/channels/{{channelId}}/summary
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 6: OMNICHANNEL (/api/v1/omnichannel)
# Routes: 12+
# File: src/modules/omnichannel/omnichannel.http
###############################################################################

### 6.1 List WhatsApp Accounts
GET {{baseUrl}}/omnichannel/whatsapp/accounts
Authorization: Bearer {{accessToken}}

### 6.2 Create WhatsApp Account
# @name createWhatsApp
POST {{baseUrl}}/omnichannel/whatsapp/accounts
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Main WhatsApp",
  "phone": "+1234567890"
}

@whatsappId = {{createWhatsApp.response.body.data.id}}

### 6.3 Get WhatsApp QR Code
GET {{baseUrl}}/omnichannel/whatsapp/accounts/{{whatsappId}}/qrcode
Authorization: Bearer {{accessToken}}

### 6.4 Send WhatsApp Message
POST {{baseUrl}}/omnichannel/whatsapp/accounts/{{whatsappId}}/send
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "to": "+0987654321",
  "message": "Hello from API!"
}

### 6.5 WhatsApp Status
GET {{baseUrl}}/omnichannel/whatsapp/accounts/{{whatsappId}}/status
Authorization: Bearer {{accessToken}}

### 6.6 Disconnect WhatsApp
POST {{baseUrl}}/omnichannel/whatsapp/accounts/{{whatsappId}}/disconnect
Authorization: Bearer {{accessToken}}

### 6.7 Delete WhatsApp Account
DELETE {{baseUrl}}/omnichannel/whatsapp/accounts/{{whatsappId}}
Authorization: Bearer {{accessToken}}

### 6.8 WhatsApp Webhook (Public)
POST {{baseUrl}}/omnichannel/webhooks/whatsapp
Content-Type: application/json

{
  "event": "message.received",
  "data": {}
}

### 6.9 List Conversations
GET {{baseUrl}}/omnichannel/conversations
Authorization: Bearer {{accessToken}}

### 6.10 Create Conversation
POST {{baseUrl}}/omnichannel/conversations
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "channel": "WHATSAPP",
  "contactId": "{{contactId}}"
}

### 6.11 Get Conversation
GET {{baseUrl}}/omnichannel/conversations/conversation-id
Authorization: Bearer {{accessToken}}

### 6.12 Update Conversation
PATCH {{baseUrl}}/omnichannel/conversations/conversation-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "status": "RESOLVED"
}

###############################################################################
# MODULE 7: NOTIFICATIONS (/api/v1/notifications)
# Routes: 4
# File: src/modules/notifications/notifications.http
###############################################################################

### 7.1 List Notifications
GET {{baseUrl}}/notifications
Authorization: Bearer {{accessToken}}

### 7.2 Intelligent Summary (AI)
GET {{baseUrl}}/notifications/summary
Authorization: Bearer {{accessToken}}

### 7.3 Mark as Read
POST {{baseUrl}}/notifications/notification-id/read
Authorization: Bearer {{accessToken}}

### 7.4 Mark All as Read
POST {{baseUrl}}/notifications/read-all
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 8: FILES (/api/v1/files)
# Routes: 6
# File: src/modules/files/files.http
###############################################################################

### 8.1 Upload File
POST {{baseUrl}}/files/upload
Authorization: Bearer {{accessToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="document.pdf"
Content-Type: application/pdf

< ./test-file.pdf
------WebKitFormBoundary--

### 8.2 List Files
GET {{baseUrl}}/files
Authorization: Bearer {{accessToken}}

### 8.3 Get Presigned URL
GET {{baseUrl}}/files/file-id/url
Authorization: Bearer {{accessToken}}

### 8.4 Download File
GET {{baseUrl}}/files/file-id/download
Authorization: Bearer {{accessToken}}

### 8.5 Delete File
DELETE {{baseUrl}}/files/file-id
Authorization: Bearer {{accessToken}}

### 8.6 Upload Avatar
POST {{baseUrl}}/files/avatar
Authorization: Bearer {{accessToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="avatar.jpg"
Content-Type: image/jpeg

< ./avatar.jpg
------WebKitFormBoundary--

###############################################################################
# MODULE 9: WEBHOOKS (/api/v1/webhooks)
# Routes: 8
# File: src/modules/webhooks/webhooks.http
###############################################################################

### 9.1 List Event Definitions
GET {{baseUrl}}/webhooks/events
Authorization: Bearer {{accessToken}}

### 9.2 Create Event Definition
POST {{baseUrl}}/webhooks/events
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "contact.created",
  "description": "Triggered when a new contact is created",
  "schema": {}
}

### 9.3 List Webhook Endpoints
GET {{baseUrl}}/webhooks/endpoints
Authorization: Bearer {{accessToken}}

### 9.4 Create Webhook Endpoint
POST {{baseUrl}}/webhooks/endpoints
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "url": "https://example.com/webhook",
  "events": ["contact.created", "deal.updated"],
  "secret": "your-webhook-secret"
}

### 9.5 Update Webhook Endpoint
PUT {{baseUrl}}/webhooks/endpoints/endpoint-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "url": "https://example.com/webhook-updated",
  "active": true
}

### 9.6 Delete Webhook Endpoint
DELETE {{baseUrl}}/webhooks/endpoints/endpoint-id
Authorization: Bearer {{accessToken}}

### 9.7 List Deliveries
GET {{baseUrl}}/webhooks/deliveries
Authorization: Bearer {{accessToken}}

### 9.8 Test Webhook
POST {{baseUrl}}/webhooks/test/endpoint-id
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 10: API KEYS (/api/v1/apikeys)
# Routes: 5
# File: src/modules/apikeys/apikeys.http
###############################################################################

### 10.1 List API Keys
GET {{baseUrl}}/apikeys
Authorization: Bearer {{accessToken}}

### 10.2 Create API Key
# @name createApiKey
POST {{baseUrl}}/apikeys
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Production API Key",
  "permissions": ["crm.read", "crm.create"],
  "expiresAt": "2025-12-31T23:59:59Z"
}

@apiKeyId = {{createApiKey.response.body.data.id}}
@apiKey = {{createApiKey.response.body.data.key}}

### 10.3 Revoke API Key
POST {{baseUrl}}/apikeys/{{apiKeyId}}/revoke
Authorization: Bearer {{accessToken}}

### 10.4 Delete API Key
DELETE {{baseUrl}}/apikeys/{{apiKeyId}}
Authorization: Bearer {{accessToken}}

### 10.5 Get API Key Usage
GET {{baseUrl}}/apikeys/{{apiKeyId}}/usage
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 11: ANALYTICS (/api/v1/analytics)
# Routes: 6
# File: src/modules/analytics/analytics.http
###############################################################################

### 11.1 Dashboard Metrics
GET {{baseUrl}}/analytics/dashboard
Authorization: Bearer {{accessToken}}

### 11.2 Time Series Data
GET {{baseUrl}}/analytics/timeseries?metric=revenue&period=7d
Authorization: Bearer {{accessToken}}

### 11.3 Top Contacts
GET {{baseUrl}}/analytics/top-contacts?limit=10
Authorization: Bearer {{accessToken}}

### 11.4 Pipeline Metrics
GET {{baseUrl}}/analytics/pipeline
Authorization: Bearer {{accessToken}}

### 11.5 User Activity
GET {{baseUrl}}/analytics/activity
Authorization: Bearer {{accessToken}}

### 11.6 Export to CSV
GET {{baseUrl}}/analytics/export/contacts
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 12: LEARNING (/api/v1/learning)
# Routes: 10
# File: src/modules/learning/learning.http
###############################################################################

### 12.1 List Learning Paths
GET {{baseUrl}}/learning/paths
Authorization: Bearer {{accessToken}}

### 12.2 Create Learning Path
POST {{baseUrl}}/learning/paths
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "Sales Fundamentals",
  "description": "Learn the basics of B2B sales",
  "items": []
}

### 12.3 Get Learning Path
GET {{baseUrl}}/learning/paths/path-id
Authorization: Bearer {{accessToken}}

### 12.4 Enroll in Path
POST {{baseUrl}}/learning/paths/path-id/enroll
Authorization: Bearer {{accessToken}}

### 12.5 List Enrollments
GET {{baseUrl}}/learning/enrollments
Authorization: Bearer {{accessToken}}

### 12.6 Mark Item Complete
POST {{baseUrl}}/learning/items/item-id/complete
Authorization: Bearer {{accessToken}}

### 12.7 List Skills
GET {{baseUrl}}/learning/skills
Authorization: Bearer {{accessToken}}

### 12.8 My Skills
GET {{baseUrl}}/learning/skills/my
Authorization: Bearer {{accessToken}}

### 12.9 Assess Skill
POST {{baseUrl}}/learning/skills/skill-id/assess
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "level": "INTERMEDIATE",
  "evidence": "Completed 10 deals using consultative selling"
}

### 12.10 Development Plans
GET {{baseUrl}}/learning/development-plans
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 13: SYNC (/api/v1/sync)
# Routes: 6
# File: src/modules/sync/sync.http
###############################################################################

### 13.1 List Connections
GET {{baseUrl}}/sync/connections
Authorization: Bearer {{accessToken}}

### 13.2 Create Connection
POST {{baseUrl}}/sync/connections
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "provider": "SALESFORCE",
  "credentials": {
    "clientId": "xxx",
    "clientSecret": "xxx"
  }
}

### 13.3 Trigger Sync
POST {{baseUrl}}/sync/run
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "connectionId": "connection-id",
  "direction": "BIDIRECTIONAL"
}

### 13.4 List Sync Runs
GET {{baseUrl}}/sync/runs
Authorization: Bearer {{accessToken}}

### 13.5 Get Sync Run
GET {{baseUrl}}/sync/runs/run-id
Authorization: Bearer {{accessToken}}

### 13.6 Manual Sync
POST {{baseUrl}}/sync/connections/connection-id/sync
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 14: SEARCH (/api/v1/search)
# Routes: 4
# File: src/modules/search/search.http
###############################################################################

### 14.1 Global Search
GET {{baseUrl}}/search?q=john&type=CONTACT
Authorization: Bearer {{accessToken}}

### 14.2 Autocomplete
GET {{baseUrl}}/search/suggest?q=joh
Authorization: Bearer {{accessToken}}

### 14.3 Recent Searches
GET {{baseUrl}}/search/recent
Authorization: Bearer {{accessToken}}

### 14.4 Save Search
POST {{baseUrl}}/search/save
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Active Deals",
  "query": "type:DEAL status:ACTIVE"
}

###############################################################################
# MODULE 15: SSO (/api/v1/sso)
# Routes: 4 (OAuth flows)
# File: src/modules/sso/sso.http
###############################################################################

### 15.1 Initiate Google OAuth
GET {{baseUrl}}/sso/google/authorize

### 15.2 Google Callback
GET {{baseUrl}}/sso/google/callback?code=xxx&state=yyy

### 15.3 List Connected Accounts
GET {{baseUrl}}/sso/accounts
Authorization: Bearer {{accessToken}}

### 15.4 Disconnect Account
DELETE {{baseUrl}}/sso/accounts/google
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 16: AUDIT (/api/v1/audit)
# Routes: 5
# File: src/modules/audit/audit.http
###############################################################################

### 16.1 Get Audit Logs
GET {{baseUrl}}/audit/logs?limit=50
Authorization: Bearer {{accessToken}}

### 16.2 Entity History
GET {{baseUrl}}/audit/history/CONTACT/{{contactId}}
Authorization: Bearer {{accessToken}}

### 16.3 User Activity
GET {{baseUrl}}/audit/activity/{{userId}}
Authorization: Bearer {{accessToken}}

### 16.4 Audit Stats
GET {{baseUrl}}/audit/stats
Authorization: Bearer {{accessToken}}

### 16.5 Export Audit Logs
GET {{baseUrl}}/audit/export?format=CSV
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 17: RBAC (/api/v1/rbac)
# Routes: 15
# File: src/modules/rbac/rbac.http
###############################################################################

### 17.1 List Departments
GET {{baseUrl}}/rbac/departments
Authorization: Bearer {{accessToken}}

### 17.2 Create Department
POST {{baseUrl}}/rbac/departments
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Sales",
  "description": "Sales department"
}

### 17.3 Update Department
PUT {{baseUrl}}/rbac/departments/dept-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Sales & Marketing"
}

### 17.4 Delete Department
DELETE {{baseUrl}}/rbac/departments/dept-id
Authorization: Bearer {{accessToken}}

### 17.5 Add User to Department
POST {{baseUrl}}/rbac/departments/dept-id/users
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "userId": "{{userId}}"
}

### 17.6 List Custom Roles
GET {{baseUrl}}/rbac/roles
Authorization: Bearer {{accessToken}}

### 17.7 Create Custom Role
POST {{baseUrl}}/rbac/roles
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Sales Manager",
  "description": "Manages sales team"
}

### 17.8 Update Role
PUT {{baseUrl}}/rbac/roles/role-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Senior Sales Manager"
}

### 17.9 Delete Role
DELETE {{baseUrl}}/rbac/roles/role-id
Authorization: Bearer {{accessToken}}

### 17.10 List Role Permissions
GET {{baseUrl}}/rbac/roles/role-id/permissions
Authorization: Bearer {{accessToken}}

### 17.11 Add Permission to Role
POST {{baseUrl}}/rbac/roles/role-id/permissions
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "permission": "crm.create"
}

### 17.12 Remove Permission from Role
DELETE {{baseUrl}}/rbac/roles/role-id/permissions/perm-id
Authorization: Bearer {{accessToken}}

### 17.13 Get User Permissions
GET {{baseUrl}}/rbac/users/{{userId}}/permissions
Authorization: Bearer {{accessToken}}

### 17.14 Grant/Revoke User Permission
POST {{baseUrl}}/rbac/users/{{userId}}/permissions
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "permission": "admin.users.read",
  "action": "GRANT"
}

### 17.15 Assign Custom Role
PUT {{baseUrl}}/rbac/users/{{userId}}/role
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "roleId": "role-id"
}

###############################################################################
# MODULE 18: PEOPLE GROWTH (/api/v1/people-growth)
# Routes: 7
# File: src/modules/people-growth/people-growth.http
###############################################################################

### 18.1 List Gaps
GET {{baseUrl}}/people-growth/gaps
Authorization: Bearer {{accessToken}}

### 18.2 Get Gap Details
GET {{baseUrl}}/people-growth/gaps/gap-id
Authorization: Bearer {{accessToken}}

### 18.3 Close Gap
POST {{baseUrl}}/people-growth/gaps/gap-id/close
Authorization: Bearer {{accessToken}}

### 18.4 Suggest Learning Paths for Gap
GET {{baseUrl}}/people-growth/gaps/gap-id/learning-paths
Authorization: Bearer {{accessToken}}

### 18.5 Team Gaps Report
GET {{baseUrl}}/people-growth/team/report
Authorization: Bearer {{accessToken}}

### 18.6 Team Heatmap
GET {{baseUrl}}/people-growth/team/heatmap
Authorization: Bearer {{accessToken}}

### 18.7 My Development Profile
GET {{baseUrl}}/people-growth/my-profile
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 19: JOBS (/api/v1/jobs)
# Routes: 10
# File: src/modules/jobs/jobs.http
###############################################################################

### 19.1 List Jobs
GET {{baseUrl}}/jobs
Authorization: Bearer {{accessToken}}

### 19.2 Get Job
GET {{baseUrl}}/jobs/job-id
Authorization: Bearer {{accessToken}}

### 19.3 Create Job
POST {{baseUrl}}/jobs
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "Senior Sales Executive",
  "description": "Looking for experienced sales professional",
  "type": "FULL_TIME",
  "status": "OPEN"
}

### 19.4 Update Job
PUT {{baseUrl}}/jobs/job-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "status": "CLOSED"
}

### 19.5 Delete Job
DELETE {{baseUrl}}/jobs/job-id
Authorization: Bearer {{accessToken}}

### 19.6 Apply to Job
POST {{baseUrl}}/jobs/job-id/apply
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "coverLetter": "I'm very interested in this position..."
}

### 19.7 Mark Interest
POST {{baseUrl}}/jobs/job-id/interest
Authorization: Bearer {{accessToken}}

### 19.8 Get Zettel Suggestions for Job
GET {{baseUrl}}/jobs/job-id/suggestions
Authorization: Bearer {{accessToken}}

### 19.9 List Applications (Admin)
GET {{baseUrl}}/jobs/job-id/applications
Authorization: Bearer {{accessToken}}

### 19.10 Update Application Status
PATCH {{baseUrl}}/jobs/applications/app-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "status": "INTERVIEW"
}

###############################################################################
# MODULE 20: SERVICES (/api/v1/services)
# Routes: 13
# File: src/modules/services/services.http
###############################################################################

### 20.1 List Services
GET {{baseUrl}}/services
Authorization: Bearer {{accessToken}}

### 20.2 Get Service
GET {{baseUrl}}/services/service-id
Authorization: Bearer {{accessToken}}

### 20.3 Create Service
POST {{baseUrl}}/services
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "Consulting Services",
  "description": "Business consulting for startups",
  "priceRange": "1000-5000",
  "category": "CONSULTING"
}

### 20.4 Update Service
PUT {{baseUrl}}/services/service-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "priceRange": "2000-7000"
}

### 20.5 Delete Service
DELETE {{baseUrl}}/services/service-id
Authorization: Bearer {{accessToken}}

### 20.6 Submit Proposal
POST {{baseUrl}}/services/service-id/propose
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "proposal": "I can complete this in 2 weeks...",
  "price": 3000
}

### 20.7 List Proposals (Admin)
GET {{baseUrl}}/services/service-id/proposals
Authorization: Bearer {{accessToken}}

### 20.8 Accept Proposal
PATCH {{baseUrl}}/services/proposals/proposal-id/accept
Authorization: Bearer {{accessToken}}

### 20.9 Reject Proposal
PATCH {{baseUrl}}/services/proposals/proposal-id/reject
Authorization: Bearer {{accessToken}}

### 20.10 Mark Service Complete
PATCH {{baseUrl}}/services/service-id/complete
Authorization: Bearer {{accessToken}}

### 20.11 Rate Service
PATCH {{baseUrl}}/services/service-id/rate
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "rating": 5,
  "review": "Excellent service!"
}

### 20.12 List Transactions
GET {{baseUrl}}/services/transactions
Authorization: Bearer {{accessToken}}

### 20.13 Update Payment Status
PATCH {{baseUrl}}/services/transactions/tx-id/payment
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "status": "PAID"
}

###############################################################################
# MODULE 21: SETTINGS (/api/v1/settings)
# Routes: 3
# File: src/modules/settings/settings.http
###############################################################################

### 21.1 Get System Settings
GET {{baseUrl}}/settings
Authorization: Bearer {{accessToken}}

### 21.2 Update System Settings
PUT {{baseUrl}}/settings
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "companyName": "Updated Company Name",
  "timezone": "UTC",
  "language": "en"
}

### 21.3 Settings History
GET {{baseUrl}}/settings/history
Authorization: Bearer {{accessToken}}

###############################################################################
# MODULE 22: EMAIL TEMPLATES (/api/v1/email-templates)
# Routes: 3
# File: src/modules/email-templates/email-templates.http
###############################################################################

### 22.1 List Templates
GET {{baseUrl}}/email-templates
Authorization: Bearer {{accessToken}}

### 22.2 Preview Template
POST {{baseUrl}}/email-templates/preview
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "templateId": "welcome-email",
  "variables": {
    "name": "John Doe",
    "companyName": "Acme Corp"
  }
}

### 22.3 Send Templated Email
POST {{baseUrl}}/email-templates/send
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "templateId": "welcome-email",
  "to": "john@example.com",
  "variables": {
    "name": "John Doe"
  }
}

###############################################################################
# ADDITIONAL ROUTES (rest-routes.ts)
# Routes: 20+
###############################################################################

### Dashboard
GET {{baseUrl}}/dashboard
Authorization: Bearer {{accessToken}}

### Dashboard Stats
GET {{baseUrl}}/dashboard/stats
Authorization: Bearer {{accessToken}}

### List Zettels
GET {{baseUrl}}/zettels
Authorization: Bearer {{accessToken}}

### Get Zettel
GET {{baseUrl}}/zettels/zettel-id
Authorization: Bearer {{accessToken}}

### Create Zettel
POST {{baseUrl}}/zettels
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "My Note",
  "content": "Content here"
}

### Update Zettel
PATCH {{baseUrl}}/zettels/zettel-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "content": "Updated content"
}

### Delete Zettel
DELETE {{baseUrl}}/zettels/zettel-id
Authorization: Bearer {{accessToken}}

### Create Zettel Link
POST {{baseUrl}}/zettels/from-id/links
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "toId": "to-id",
  "type": "RELATES_TO"
}

### List Workflows
GET {{baseUrl}}/workflows
Authorization: Bearer {{accessToken}}

### Create Workflow
POST {{baseUrl}}/workflows
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Lead Nurturing",
  "trigger": "CONTACT_CREATED",
  "actions": []
}

### Update Workflow
PATCH {{baseUrl}}/workflows/workflow-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "active": true
}

### Delete Workflow
DELETE {{baseUrl}}/workflows/workflow-id
Authorization: Bearer {{accessToken}}

### List Gaps
GET {{baseUrl}}/gaps
Authorization: Bearer {{accessToken}}

### Update Gap
PATCH {{baseUrl}}/gaps/gap-id
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "status": "CLOSED"
}

### List Learning Paths
GET {{baseUrl}}/learning-paths
Authorization: Bearer {{accessToken}}

###############################################################################
# END OF API MASTER
# Total Routes Tested: 250+
# Last Updated: 2026-01-02
###############################################################################
